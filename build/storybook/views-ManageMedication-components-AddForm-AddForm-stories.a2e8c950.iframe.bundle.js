"use strict";(self.webpackChunkh3_consumer_web=self.webpackChunkh3_consumer_web||[]).push([[9052],{"./src/assets/images/modals/alert.svg":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__("./node_modules/react/index.js");__webpack_exports__.Z=__webpack_require__.p+"static/media/alert.861183f031e3d83b4e9aceb28ee93208.svg"},"./src/views/ManageMedication/components/AddForm/AddForm.stories.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:function(){return Default},default:function(){return AddForm_stories}});var objectSpread2=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),slicedToArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),react=__webpack_require__("./node_modules/react/index.js"),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),dateUtils=__webpack_require__("./src/utils/dateUtils/dateUtils.ts"),uikit=__webpack_require__("./src/uikit/index.ts"),react_router=__webpack_require__("./node_modules/react-router/index.js"),useTranslation=__webpack_require__("./node_modules/react-i18next/dist/es/useTranslation.js"),components=__webpack_require__("./src/components/index.ts"),graphql_type=__webpack_require__("./src/types/graphql.type.ts"),useUserLanguage=__webpack_require__("./src/hooks/useUserLanguage.ts"),isOther=__webpack_require__("./src/views/ManageMedication/utils/isOther.ts"),VerifyMedicationFields=__webpack_require__("./src/views/ManageMedication/components/VerifyMedicationFields/VerifyMedicationFields.tsx"),MedicationIcon=__webpack_require__("./src/views/ManageMedication/components/MedicationIcon/index.ts"),ActivePrescription=__webpack_require__("./src/views/ManageMedication/components/AddForm/ActivePrescription/ActivePrescription.tsx"),AddForm_module={wrapper:"AddForm_wrapper__aC4Uo",buttons:"AddForm_buttons__Mtf+f","card-heading":"AddForm_card-heading__PaS8a",content:"AddForm_content__qIawC",icon:"AddForm_icon__bSGBY",info:"AddForm_info__ucGGC","only-read":"AddForm_only-read__7O1lT",no:"AddForm_no__jLsM+","mobile-button":"AddForm_mobile-button__AV6gx","delete-button":"AddForm_delete-button__sq+JQ","tabletup-button":"AddForm_tabletup-button__jzUIB"},objectWithoutProperties=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),Modal=__webpack_require__("./src/components/Modal/index.ts"),Heading=__webpack_require__("./src/components/Heading/index.ts"),Button=__webpack_require__("./src/components/Button/index.ts"),modals_alert=__webpack_require__("./src/assets/images/modals/alert.svg"),routes=__webpack_require__("./src/constants/routes.ts"),useMutation=__webpack_require__("./node_modules/@apollo/client/react/hooks/useMutation.js"),useDeleteMedication=function useDeleteMedication(successRoute){var navigate=(0,react_router.s0)(),_useMutation=(0,useMutation.D)(graphql_type.uSr,{onCompleted:function onCompleted(){navigate(successRoute)}}),_useMutation2=(0,slicedToArray.Z)(_useMutation,2),deleteMedications=_useMutation2[0],_useMutation2$=_useMutation2[1];return{deleteMedications:deleteMedications,error:_useMutation2$.error,result:_useMutation2$.data}};try{useDeleteMedication.displayName="useDeleteMedication",useDeleteMedication.__docgenInfo={description:"",displayName:"useDeleteMedication",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/views/ManageMedication/components/Modals/DeleteModal/useDeleteMedication.tsx#useDeleteMedication"]={docgenInfo:useDeleteMedication.__docgenInfo,name:"useDeleteMedication",path:"src/views/ManageMedication/components/Modals/DeleteModal/useDeleteMedication.tsx#useDeleteMedication"})}catch(__react_docgen_typescript_loader_error){}var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),_excluded=["onRequestClose","medId","deleteRoute"],DeleteModal=function DeleteModal(_ref){var onRequestClose=_ref.onRequestClose,medId=_ref.medId,deleteRoute=_ref.deleteRoute,props=(0,objectWithoutProperties.Z)(_ref,_excluded),t=(0,useTranslation.$)().t,deleteMedications=useDeleteMedication(deleteRoute||routes._.medicationManagement.index).deleteMedications;return(0,jsx_runtime.jsxs)(Modal.u,(0,objectSpread2.Z)((0,objectSpread2.Z)({contentLabel:t("modals:DeleteMedication.title"),onRequestClose:onRequestClose},props),{},{children:[(0,jsx_runtime.jsx)(Modal.u.Slot,{slotName:"image-top",children:(0,jsx_runtime.jsx)("img",{src:modals_alert.Z,alt:"","aria-hidden":!0})}),(0,jsx_runtime.jsx)(Modal.u.Slot,{slotName:"heading",children:(0,jsx_runtime.jsx)(Heading.X,{className:"h3",children:t("modals:DeleteMedication.title")})}),(0,jsx_runtime.jsx)(Modal.u.Slot,{slotName:"content",isContained:!0,isCentered:!0,children:(0,jsx_runtime.jsx)("p",{className:"paragraph",children:t("modals:DeleteMedication.description")})}),(0,jsx_runtime.jsxs)(Modal.u.Slot,{slotName:"button",children:[(0,jsx_runtime.jsx)(Button.z,{text:t("modals:DeleteMedication.primaryButton"),btnStyle:"tertiary",onClickCallback:function onClickCallback(){return function onDelete(id){deleteMedications({variables:{id:id}})}(medId)}}),(0,jsx_runtime.jsx)(Button.z,{text:t("modals:DeleteMedication.secundaryButton"),onClickCallback:onRequestClose})]})]}))};try{DeleteModal.displayName="DeleteModal",DeleteModal.__docgenInfo={description:"",displayName:"DeleteModal",props:{medId:{defaultValue:null,description:"",name:"medId",required:!1,type:{name:"string | null"}},deleteRoute:{defaultValue:null,description:"",name:"deleteRoute",required:!1,type:{name:"string"}},title:{defaultValue:null,description:"Title text",name:"title",required:!1,type:{name:"string"}},contentLabel:{defaultValue:null,description:"String indicating how the content container should be announced\nto screenreaders.",name:"contentLabel",required:!1,type:{name:"string"}},isOpen:{defaultValue:null,description:"Boolean describing if the modal should be shown or not.",name:"isOpen",required:!0,type:{name:"boolean"}},isMobileButtonsReverse:{defaultValue:null,description:"Boolean to reverse order of buttons on mobile",name:"isMobileButtonsReverse",required:!1,type:{name:"boolean"}},onRequestClose:{defaultValue:null,description:"Function that will be run when the modal is requested\nto be closed (either by clicking on overlay or pressing ESC).\nNote: It is not called if isOpen is changed by other means.",name:"onRequestClose",required:!0,type:{name:"() => void"}},onAfterOpen:{defaultValue:null,description:"Function that will be run after the modal has opened.",name:"onAfterOpen",required:!1,type:{name:"(() => void)"}},onAfterClose:{defaultValue:null,description:"Function that will be run after the modal has closed.",name:"onAfterClose",required:!1,type:{name:"(() => void)"}},closeTimeoutMS:{defaultValue:null,description:"Number indicating the milliseconds to wait before closing\nthe modal.",name:"closeTimeoutMS",required:!1,type:{name:"number"}},id:{defaultValue:null,description:"String id to be applied to the content div",name:"id",required:!1,type:{name:"string"}},testId:{defaultValue:null,description:"String testId that renders a data-testid attribute in the DOM,\nuseful for testing.",name:"testId",required:!1,type:{name:"string"}},ariaHideApp:{defaultValue:null,description:"Boolean to hide page content from assistive technologies when modal is open",name:"ariaHideApp",required:!1,type:{name:"boolean"}},isImageLayout:{defaultValue:null,description:"Force the modal layout when image is present even without image",name:"isImageLayout",required:!1,type:{name:"boolean"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/views/ManageMedication/components/Modals/DeleteModal/DeleteModal.tsx#DeleteModal"]={docgenInfo:DeleteModal.__docgenInfo,name:"DeleteModal",path:"src/views/ManageMedication/components/Modals/DeleteModal/DeleteModal.tsx#DeleteModal"})}catch(__react_docgen_typescript_loader_error){}var AddForm=function AddForm(_ref){var _location$state,_medicineData$medicat,_medicineData$medicat2,_medicineData$medicat3,_medicineData$medicat4,_medicineData$medicat5,_medicineData$medicat6,_medicineData$medicat7,_medicineData$medicat8,medicineData=_ref.medicineData,handleSave=_ref.handleSave,cancelRoute=_ref.cancelRoute,deleteRoute=_ref.deleteRoute,cardHeading=_ref.cardHeading,isUpdating=_ref.isUpdating,location=(0,react_router.TH)(),language=(0,useUserLanguage.f)(),t=(0,useTranslation.$)().t,_useState=(0,react.useState)(),_useState2=(0,slicedToArray.Z)(_useState,2),medObject1=_useState2[0],setMedObject1=_useState2[1],_useState3=(0,react.useState)(),_useState4=(0,slicedToArray.Z)(_useState3,2),medObject2=_useState4[0],setMedObject2=_useState4[1],_useState5=(0,react.useState)(),_useState6=(0,slicedToArray.Z)(_useState5,2),fullObject=_useState6[0],setFullObject=_useState6[1],_useState7=(0,react.useState)(!1),_useState8=(0,slicedToArray.Z)(_useState7,2),form1=_useState8[0],setForm1=_useState8[1],_useState9=(0,react.useState)(!1),_useState10=(0,slicedToArray.Z)(_useState9,2),form2=_useState10[0],setForm2=_useState10[1],_useState11=(0,react.useState)(!1),_useState12=(0,slicedToArray.Z)(_useState11,2),deleteModal=_useState12[0],setDeleteModal=_useState12[1],_useState13=(0,react.useState)(medicineData.type),_useState14=(0,slicedToArray.Z)(_useState13,2),activeType=_useState14[0],setActiveType=_useState14[1],viewDetailsRef=(0,react.useRef)(null),hasFinsishCard=(null==location||null===(_location$state=location.state)||void 0===_location$state?void 0:_location$state.hasFinishCard)||!1,_ref2=medicineData.medicationData||"",productId=_ref2.productId,medicationGroup=_ref2.medicationGroup,gpi=_ref2.gpi,name=_ref2.name,description=_ref2.description,searchTerm=_ref2.searchTerm,isShowingResults=_ref2.isShowingResults,searchLocation=_ref2.searchLocation,_useCatalogueMedicine=(0,graphql_type.nbX)({variables:{productId:(null==medicineData||null===(_medicineData$medicat=medicineData.medicationData)||void 0===_medicineData$medicat?void 0:_medicineData$medicat.productId)||"",lang:language}}),data=_useCatalogueMedicine.data,loading=_useCatalogueMedicine.loading;(0,react.useEffect)((function(){(form1&&form2||form1&&form2&&isUpdating)&&(setForm1(!1),setForm2(!1),setFullObject((0,objectSpread2.Z)((0,objectSpread2.Z)({},medObject1),medObject2))),"no"===activeType&&form1&&(setForm1(!1),setForm2(!1),setFullObject((0,objectSpread2.Z)({},medObject1)))}),[form1,form2,isUpdating,medObject1,medObject2,medicationGroup]);var handleSubmit=function handleSubmit(){var _viewDetailsRef$curre,_viewDetailsRef$curre2,shouldSubmitPrescription="yes"===activeType||"onprogress"===activeType||isUpdating,submitMedicationButton=null===(_viewDetailsRef$curre=viewDetailsRef.current)||void 0===_viewDetailsRef$curre?void 0:_viewDetailsRef$curre.querySelectorAll('[type="submit"]')[0],submitPrescriptionButton=null===(_viewDetailsRef$curre2=viewDetailsRef.current)||void 0===_viewDetailsRef$curre2?void 0:_viewDetailsRef$curre2.querySelectorAll('[type="submit"]')[1];null==submitMedicationButton||submitMedicationButton.click(),shouldSubmitPrescription&&(null==submitPrescriptionButton||submitPrescriptionButton.click())};(0,react.useEffect)((function(){handleSave(fullObject)}),[fullObject,handleSave]);return(0,jsx_runtime.jsxs)("div",{ref:viewDetailsRef,className:classnames_default()(AddForm_module.wrapper,AddForm_module[activeType]),children:[cardHeading&&(0,jsx_runtime.jsx)(components.X6,{headingLevel:"h2",className:AddForm_module["card-heading"],"data-testid":"card-heading",children:cardHeading}),(0,jsx_runtime.jsxs)("div",{className:AddForm_module.content,children:[(0,jsx_runtime.jsx)("figure",{className:AddForm_module.icon,children:(0,jsx_runtime.jsx)(MedicationIcon.EA,{medicationGroup:medicationGroup,isActive:"no"!==activeType})}),(0,jsx_runtime.jsxs)("div",{className:classnames_default()(AddForm_module.info,AddForm_module[activeType]),children:[(0,jsx_runtime.jsx)("div",{className:AddForm_module["only-read"],children:(0,jsx_runtime.jsx)(VerifyMedicationFields.C,{medication:null==medicineData?void 0:medicineData.medicationData,enable:"IMPORTED"!==(null==medicineData||null===(_medicineData$medicat2=medicineData.medicationData)||void 0===_medicineData$medicat2?void 0:_medicineData$medicat2.creationType),placeHolder:"IMPORTED"===(null==medicineData||null===(_medicineData$medicat3=medicineData.medicationData)||void 0===_medicineData$medicat3?void 0:_medicineData$medicat3.creationType)?"-":"",handleSave:function handleMedicationSubmit(formData){setMedObject1({productId:productId,name:name,description:description,medicationGroup:medicationGroup,gpi:gpi,creationType:"MANUALLY",status:"yes"===activeType||"onprogress"===activeType?"ACTIVE":"NON_ACTIVE",quantity:formData.quantity,pharmacy:formData.pharmacy,pharmacyPhoneNumber:"undefined"===formData.pharmacyPhone?"":formData.pharmacyPhone,prescribedBy:formData.prescribed,prescriberPhoneNumber:"undefined"===formData.prescriberPhone?"":formData.prescriberPhone,lastRefillDate:""===formData.lastFill?null:(0,dateUtils.P7)(formData.lastFill)}),setForm1(!0)}})}),(0,jsx_runtime.jsx)(ActivePrescription.U,{data:{type:activeType,medicationData:medicineData.medicationData,medicineCatalog:null==data?void 0:data.catalogueMedicine},onChange:function handlePrescriptionChange(typeActive){setActiveType(typeActive)},handleSave:function handlePrescriptionSubmit(formData){var _formData$reason,_formData$reason2,_formData$timesInADay,_formData$timesInADay2,_formData$amount,_formData$amount2,reason=(0,isOther.p)(null===(_formData$reason=formData.reason)||void 0===_formData$reason?void 0:_formData$reason.value)?formData.typeReason:null===(_formData$reason2=formData.reason)||void 0===_formData$reason2?void 0:_formData$reason2.value,time=(0,isOther.p)(null===(_formData$timesInADay=formData.timesInADay)||void 0===_formData$timesInADay?void 0:_formData$timesInADay.value)?formData.typeTimesInADay:null===(_formData$timesInADay2=formData.timesInADay)||void 0===_formData$timesInADay2?void 0:_formData$timesInADay2.value,amount=(0,isOther.p)(null===(_formData$amount=formData.amount)||void 0===_formData$amount?void 0:_formData$amount.value)?formData.typeAmount:null===(_formData$amount2=formData.amount)||void 0===_formData$amount2?void 0:_formData$amount2.value;setMedObject2({intakeReasonValue:reason,intakeTimeValue:time,quantityValue:amount}),setForm2(!0)},loading:loading})]})]}),(0,jsx_runtime.jsxs)("div",{"data-element":"buttons",className:AddForm_module.buttons,children:[(0,jsx_runtime.jsx)(uikit.zx,{className:AddForm_module["mobile-button"],onClick:handleSubmit,variant:"primary",children:"MANUALLY"===(null===(_medicineData$medicat4=medicineData.medicationData)||void 0===_medicineData$medicat4?void 0:_medicineData$medicat4.creationType)?t("views.VerifyMedications.doneButton"):t("views.VerifyMedications.saveButton")}),"MANUALLY"===(null===(_medicineData$medicat5=medicineData.medicationData)||void 0===_medicineData$medicat5?void 0:_medicineData$medicat5.creationType)&&(0,jsx_runtime.jsx)(uikit.zx,{onClick:function onClick(){return setDeleteModal(!0)},variant:"primary-outlined",className:classnames_default()(AddForm_module["tabletup-button"],AddForm_module["delete-button"]),children:t("views.VerifyMedications.deleteButton")}),(0,jsx_runtime.jsx)(uikit.zx,{to:cancelRoute,role:"button",variant:"primary-outlined",state:{hasFinishCard:hasFinsishCard,searchedTerm:searchTerm,isShowingResults:isShowingResults,productId:productId,searchLocation:searchLocation},children:t("views.VerifyMedications.cancelButton")}),(0,jsx_runtime.jsx)(uikit.zx,{className:AddForm_module["tabletup-button"],onClick:handleSubmit,variant:"primary",children:"MANUALLY"===(null===(_medicineData$medicat6=medicineData.medicationData)||void 0===_medicineData$medicat6?void 0:_medicineData$medicat6.creationType)?t("views.VerifyMedications.doneButton"):t("views.VerifyMedications.saveButton")}),"MANUALLY"===(null===(_medicineData$medicat7=medicineData.medicationData)||void 0===_medicineData$medicat7?void 0:_medicineData$medicat7.creationType)&&(0,jsx_runtime.jsx)(uikit.zx,{onClick:function onClick(){return setDeleteModal(!0)},variant:"primary-outlined",className:classnames_default()(AddForm_module["mobile-button"],AddForm_module["delete-button"]),children:t("views.VerifyMedications.deleteButton")})]}),(0,jsx_runtime.jsx)(DeleteModal,{isOpen:deleteModal,onRequestClose:function onRequestClose(){return setDeleteModal(!1)},medId:null==medicineData||null===(_medicineData$medicat8=medicineData.medicationData)||void 0===_medicineData$medicat8?void 0:_medicineData$medicat8.id,deleteRoute:deleteRoute,isMobileButtonsReverse:!0})]})};try{AddForm.displayName="AddForm",AddForm.__docgenInfo={description:"",displayName:"AddForm",props:{medicineData:{defaultValue:null,description:"",name:"medicineData",required:!0,type:{name:"DataProps"}},handleSave:{defaultValue:null,description:"",name:"handleSave",required:!0,type:{name:"(fullObject: object | undefined) => void"}},cancelRoute:{defaultValue:null,description:"",name:"cancelRoute",required:!0,type:{name:"string"}},deleteRoute:{defaultValue:null,description:"",name:"deleteRoute",required:!1,type:{name:"string"}},cardHeading:{defaultValue:null,description:"",name:"cardHeading",required:!1,type:{name:"string"}},isUpdating:{defaultValue:null,description:"",name:"isUpdating",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/views/ManageMedication/components/AddForm/AddForm.tsx#AddForm"]={docgenInfo:AddForm.__docgenInfo,name:"AddForm",path:"src/views/ManageMedication/components/AddForm/AddForm.tsx#AddForm"})}catch(__react_docgen_typescript_loader_error){}var AddForm_stories={title:"Consumer Web/View Details Card",component:AddForm},Default=function Template(args){return(0,jsx_runtime.jsx)(AddForm,(0,objectSpread2.Z)({},args))}.bind({});Default.args={medicineData:{type:"none"}},Default.parameters=(0,objectSpread2.Z)({storySource:{source:"(args) => (\n  <AddForm {...args} />\n)"}},Default.parameters)},"./src/utils/dateUtils/dateUtils.ts":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{jh:function(){return bffDateToDateFieldUS},P7:function(){return DateFieldToBFF},yu:function(){return regExValidDate}});var _Users_matveyprupas_Documents_projects_WALG_CORE_h3_consumer_web_h3_consumer_web_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),bffDateToDateFieldUS=function bffDateToDateFieldUS(dateString){var d=new Date(dateString);return["0".concat(d.getUTCMonth()+1).slice(-2),"0".concat(d.getUTCDate()).slice(-2),d.getUTCFullYear()].join(" / ")},DateFieldToBFF=function DateFieldToBFF(dateString){var _dateString$split=dateString.split(" / "),_dateString$split2=(0,_Users_matveyprupas_Documents_projects_WALG_CORE_h3_consumer_web_h3_consumer_web_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_0__.Z)(_dateString$split,3),month=_dateString$split2[0],date=_dateString$split2[1];return[_dateString$split2[2],month,date].join("-")},regExValidDate=/((0[1-9]|1[0-2]) \/ (0[1-9]|[1-2][0-9]|3[0-1]) \/ ([0-9]{4}))/},"./src/views/ManageMedication/components/AddForm/ActivePrescription/ActivePrescription.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{U:function(){return ActivePrescription}});var slicedToArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),react=__webpack_require__("./node_modules/react/index.js"),useTranslation=__webpack_require__("./node_modules/react-i18next/dist/es/useTranslation.js"),uikit=__webpack_require__("./src/uikit/index.ts"),EditMedicationDropdown=__webpack_require__("./src/views/ManageMedication/components/EditMedicationDropdown/index.ts"),ActivePrescription_module={"active-prescriptions":"ActivePrescription_active-prescriptions__eVkcF","segmented-question":"ActivePrescription_segmented-question__85NNR",question:"ActivePrescription_question__WhPZZ",segmented:"ActivePrescription_segmented__A-xAH",form:"ActivePrescription_form__uA1NX","not-visible":"ActivePrescription_not-visible__fb8np"},jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),ActivePrescription=function ActivePrescription(_ref){var _data$medicationData,_data$medicationData2,_data$medicationData3,_data$medicationData4,_data$medicationData5,_data$medicationData6,_data$medicationData7,_data$medicationData8,_data$medicationData9,onChange=_ref.onChange,data=_ref.data,handleSave=_ref.handleSave,loading=_ref.loading,_useTranslation=(0,useTranslation.$)(),t=_useTranslation.t,i18n=_useTranslation.i18n,_useState=(0,react.useState)(!1),_useState2=(0,slicedToArray.Z)(_useState,2),languageChange=_useState2[0],setLanguageChange=_useState2[1];(0,react.useEffect)((function(){setLanguageChange(!0)}),[i18n.language]),(0,react.useEffect)((function(){!0===languageChange&&setTimeout((function(){setLanguageChange(!1)}),250)}),[languageChange]);return(0,jsx_runtime.jsxs)("div",{className:"\n        ".concat(ActivePrescription_module["active-prescriptions"],"\n      "),children:[(0,jsx_runtime.jsxs)("div",{className:ActivePrescription_module["segmented-question"],children:[(0,jsx_runtime.jsx)("div",{className:ActivePrescription_module.question,id:"active-prescription-legend",children:t("views.MedicationManagement.isActivePrescriptionQuestion")}),(0,jsx_runtime.jsx)("div",{className:ActivePrescription_module.segmented,children:(0,jsx_runtime.jsxs)(uikit.Cb,{value:"onprogress"===(null==data?void 0:data.type)?"yes":data.type,name:"segmented-1",onChange:function onChangeHandler(event){var value=event.target.value;if("yes"===value)null==onChange||onChange("onprogress");else null==onChange||onChange(value)},"aria-label":t("views.MedicationManagement.isActivePrescriptionQuestion"),children:[(0,jsx_runtime.jsx)(uikit.uA,{value:"yes",children:t("views.MedicationManagement.segmentedButtons.yes")}),(0,jsx_runtime.jsx)(uikit.uA,{value:"no",children:t("views.MedicationManagement.segmentedButtons.no")})]})})]}),(0,jsx_runtime.jsx)("div",{className:"\n        ".concat(ActivePrescription_module.form,"\n        ").concat(("none"===data.type||"no"===data.type)&&ActivePrescription_module["not-visible"],"\n      "),children:loading||languageChange?(0,jsx_runtime.jsx)(uikit.$j,{className:ActivePrescription_module["profile-loader"]}):(0,jsx_runtime.jsx)(EditMedicationDropdown.L,{handleDone:function handleDone(formData){return function onDoneHandler(formData){handleSave(formData)}(formData)},validateType:data.type,intakeData:data.medicineCatalog,isLoading:loading,amountValue:null!==(_data$medicationData=data.medicationData)&&void 0!==_data$medicationData&&_data$medicationData.quantityValue?{value:null===(_data$medicationData2=data.medicationData)||void 0===_data$medicationData2?void 0:_data$medicationData2.quantityValue,label:null===(_data$medicationData3=data.medicationData)||void 0===_data$medicationData3?void 0:_data$medicationData3.quantityValue}:null,reasonValue:null!==(_data$medicationData4=data.medicationData)&&void 0!==_data$medicationData4&&_data$medicationData4.intakeReasonValue?{value:null===(_data$medicationData5=data.medicationData)||void 0===_data$medicationData5?void 0:_data$medicationData5.intakeReasonValue,label:null===(_data$medicationData6=data.medicationData)||void 0===_data$medicationData6?void 0:_data$medicationData6.intakeReasonValue}:null,timesInADayValue:null!==(_data$medicationData7=data.medicationData)&&void 0!==_data$medicationData7&&_data$medicationData7.intakeTimeValue?{value:null===(_data$medicationData8=data.medicationData)||void 0===_data$medicationData8?void 0:_data$medicationData8.intakeTimeValue,label:null===(_data$medicationData9=data.medicationData)||void 0===_data$medicationData9?void 0:_data$medicationData9.intakeTimeValue}:null})})]})};try{ActivePrescription.displayName="ActivePrescription",ActivePrescription.__docgenInfo={description:"",displayName:"ActivePrescription",props:{data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"DataProps"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:'((type: "none" | "yes" | "no" | "onprogress") => void)'}},handleSave:{defaultValue:null,description:"function to save the fields",name:"handleSave",required:!0,type:{name:"(data: FormValues) => void"}},loading:{defaultValue:null,description:"",name:"loading",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/views/ManageMedication/components/AddForm/ActivePrescription/ActivePrescription.tsx#ActivePrescription"]={docgenInfo:ActivePrescription.__docgenInfo,name:"ActivePrescription",path:"src/views/ManageMedication/components/AddForm/ActivePrescription/ActivePrescription.tsx#ActivePrescription"})}catch(__react_docgen_typescript_loader_error){}},"./src/views/ManageMedication/components/EditMedicationDropdown/index.ts":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{L:function(){return _EditMedicationDropdown__WEBPACK_IMPORTED_MODULE_0__.L}});var _EditMedicationDropdown__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/views/ManageMedication/components/EditMedicationDropdown/EditMedicationDropdown.tsx")},"./src/views/ManageMedication/components/MedicationIcon/index.ts":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{EA:function(){return _MedicationIcon__WEBPACK_IMPORTED_MODULE_0__.EA}});var _MedicationIcon__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/views/ManageMedication/components/MedicationIcon/MedicationIcon.tsx")},"./src/views/ManageMedication/components/VerifyMedicationFields/VerifyMedicationFields.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{C:function(){return VerifyMedicationFields}});var objectSpread2=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),slicedToArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),react=__webpack_require__("./node_modules/react/index.js"),index_esm=__webpack_require__("./node_modules/react-hook-form/dist/index.esm.mjs"),Form=__webpack_require__("./src/components/Form/index.ts"),DateField=__webpack_require__("./src/components/DateField/index.ts"),useTranslation=__webpack_require__("./node_modules/react-i18next/dist/es/useTranslation.js"),uikit=__webpack_require__("./src/uikit/index.ts"),utils=__webpack_require__("./src/utils/index.ts"),dateUtils=__webpack_require__("./src/utils/dateUtils/dateUtils.ts"),validateFields=__webpack_require__("./src/utils/validations/fields/validateFields.ts"),VerifyMedicationFields_module={root:"VerifyMedicationFields_root__SD2c+",wraper:"VerifyMedicationFields_wraper__sggZc",input:"VerifyMedicationFields_input__Ma8C3"},jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),VerifyMedicationFields=function VerifyMedicationFields(_ref){var placeHolder=_ref.placeHolder,medication=_ref.medication,enable=_ref.enable,handleSave=_ref.handleSave,t=(0,useTranslation.$)().t,formRef=(0,react.useRef)(null),validation={required:t("validations.required"),maxLengthPhone:{value:18,message:"form.fields.phoneNumber.errors.invalid",empty:9}},_useState=(0,react.useState)(!1),_useState2=(0,slicedToArray.Z)(_useState,2),hasExceedMaxLenghtQuantity=_useState2[0],setHasExceedMaxLenghtQuantity=_useState2[1],_useState3=(0,react.useState)(!1),_useState4=(0,slicedToArray.Z)(_useState3,2),hasExceedMaxLenghtPrescribed=_useState4[0],setHasExceedMaxLenghtPrescribed=_useState4[1],_useState5=(0,react.useState)(!1),_useState6=(0,slicedToArray.Z)(_useState5,2),hasExceedMaxLenghtPharmacy=_useState6[0],setHasExceedMaxLenghtPharmacy=_useState6[1],_useState7=(0,react.useState)(!0),_useState8=(0,slicedToArray.Z)(_useState7,2),errorDate=_useState8[0],setErrorDate=_useState8[1],_useForm=(0,index_esm.cI)({mode:"onSubmit",criteriaMode:"all"}),handleSubmit=_useForm.handleSubmit,register=_useForm.register,formState=_useForm.formState,control=_useForm.control,setValue=_useForm.setValue,watch=_useForm.watch,handleFormSubmit=handleSubmit(handleSave,(0,utils.fk)({control:control})),textRegister=register,errors=formState.errors,watchAll=watch(),description=function description(input,error,maxLength,state){return(null==input?void 0:input.length)===maxLength?state?(0,jsx_runtime.jsx)("div",{className:"a11y",id:"typeAnswerLenghtStatusExceed","aria-live":"assertive","aria-atomic":!0,children:t("views.MedicationManagement.exceedMaxLength")}):(0,jsx_runtime.jsx)("span",{className:"a11y",id:"typeAnswerLenghtStatusReached","aria-live":"assertive","aria-atomic":!0,children:t("views.MedicationManagement.reachedMaxLength")}):(0,jsx_runtime.jsx)(Form.p,{value:error})};(0,react.useEffect)((function(){"+1 - ___ - ___ - ____"===watchAll.prescriberPhone&&setValue("prescriberPhone","undefined"),"+1 - ___ - ___ - ____"===watchAll.pharmacyPhone&&setValue("pharmacyPhone","undefined")}),[watchAll.prescriberPhone,watchAll.pharmacyPhone,setValue]);var _onKeyDown=function onKeyDown(event,setMaxlength){return event.target.value.length===event.target.maxLength?setMaxlength(!0):setMaxlength(!1)},validPhone=function validPhone(currentLength){var PhoneLength=currentLength.replace(/-|_/g,"").length;return!(PhoneLength<validation.maxLengthPhone.value&&currentLength.length-1>=validation.maxLengthPhone.empty)||(PhoneLength===validation.maxLengthPhone.empty-1||validation.maxLengthPhone.message)};return(0,react.useEffect)((function(){setValue("quantity","".concat(medication&&(null==medication?void 0:medication.quantity)||"")),setValue("prescriberPhone","".concat(null==medication?void 0:medication.prescriberPhoneNumber)),setValue("pharmacyPhone","".concat(null==medication?void 0:medication.pharmacyPhoneNumber)),setValue("lastFill","".concat(null!=(null==medication?void 0:medication.lastRefillDate)?(0,dateUtils.jh)(null==medication?void 0:medication.lastRefillDate):""))}),[medication,setValue]),(0,jsx_runtime.jsxs)("div",{className:VerifyMedicationFields_module.root,children:[(0,jsx_runtime.jsxs)("p",{children:[t("views.MedicationManagement.VerifyYourMedication.description")," ",(0,jsx_runtime.jsx)("span",{children:"*"}),"."]}),(0,jsx_runtime.jsxs)("form",{onSubmit:handleFormSubmit,id:"form",ref:formRef,noValidate:!0,children:[(0,jsx_runtime.jsxs)("div",{className:VerifyMedicationFields_module.wraper,children:[(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)(index_esm.Qr,{name:"quantity",control:control,rules:{required:validation.required},render:function render(_ref2){var field=_ref2.field;return(0,jsx_runtime.jsx)(uikit.gs,{className:VerifyMedicationFields_module.input,id:"quantity",label:t("views.MedicationManagement.VerifyYourMedication.quantityLabel"),isRequired:enable,validity:errors.quantity&&"invalid",description:description(watchAll.quantity,errors.quantity,7,hasExceedMaxLenghtQuantity),input:function input(inputProps){return(0,jsx_runtime.jsx)(uikit.Y2,(0,objectSpread2.Z)((0,objectSpread2.Z)({},register("quantity")),{},{id:"quantity","aria-invalid":inputProps["aria-invalid"],validity:errors.quantity&&"invalid",maxLength:7,minVal:0,isReadOnly:!enable,isRequired:enable,value:field.value,onChange:field.onChange,placeholder:placeHolder,onKeyDown:function onKeyDown(event){return _onKeyDown(event,setHasExceedMaxLenghtQuantity)}}))}})}}),(0,jsx_runtime.jsx)(uikit.nv,(0,objectSpread2.Z)((0,objectSpread2.Z)({className:VerifyMedicationFields_module.input,id:"prescribed",label:t("views.MedicationManagement.VerifyYourMedication.prescribedLabel"),placeholder:placeHolder,defaultValue:null==medication?void 0:medication.prescribedBy,onKeyDown:function onKeyDown(e){return _onKeyDown(e,setHasExceedMaxLenghtPrescribed)},description:description(watchAll.prescribed,errors.prescribed,60,hasExceedMaxLenghtPrescribed),validity:errors.prescribed&&"invalid"},textRegister("prescribed",{validate:function validate(value){return!(validateFields.n.test(value)||null!=value&&value.includes("&&")||null!=value&&value.includes("||"))||t("views.MedicationManagement.unexpectedCharacters")}})),{},{maxLength:60,isReadOnly:!enable,"aria-readonly":!enable})),(0,jsx_runtime.jsx)(index_esm.Qr,{name:"prescriberPhone",control:control,rules:{validate:function validate(value){return validPhone(value)}},render:function render(_ref3){var field=_ref3.field;return(0,jsx_runtime.jsx)(uikit.gs,{className:VerifyMedicationFields_module.input,id:"prescriberPhone",label:t("views.MedicationManagement.VerifyYourMedication.prescriberPhoneLabel"),validity:errors.prescriberPhone&&"invalid",description:(0,jsx_runtime.jsx)(Form.p,{value:errors.prescriberPhone}),input:function input(inputProps){return(0,jsx_runtime.jsx)(uikit.AJ,(0,objectSpread2.Z)((0,objectSpread2.Z)({},inputProps),{},{id:"prescriberPhone",validity:errors.quantity&&"invalid",value:field.value,onChange:field.onChange,isReadOnly:!enable,"aria-readonly":!enable}))}})}})]}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("div",{className:VerifyMedicationFields_module.input,children:(0,jsx_runtime.jsx)(index_esm.Qr,{name:"lastFill",control:control,rules:{validate:function validate(value){return function validDate(date){return""===date?(setErrorDate(!0),!0):(setErrorDate(dateUtils.yu.test(date)),dateUtils.yu.test(date))}(value)}},render:function render(_ref4){var field=_ref4.field;return(0,jsx_runtime.jsx)(DateField.Nn,(0,objectSpread2.Z)((0,objectSpread2.Z)({},field),{},{datePickerAlt:"lastFill","aria-autocomplete":"list",label:t("views.MedicationManagement.VerifyYourMedication.lastFillLabel"),isRequired:!1,isReadOnly:!enable,"aria-readonly":!enable,isInvalid:!errorDate,error:errorDate?"":"form.fields.LastFillDate.errors.invalid"}))}})}),(0,jsx_runtime.jsx)(uikit.nv,(0,objectSpread2.Z)((0,objectSpread2.Z)({className:VerifyMedicationFields_module.input,id:"pharmacy",label:t("views.MedicationManagement.VerifyYourMedication.pharmacyLabel"),placeholder:placeHolder,defaultValue:null==medication?void 0:medication.pharmacy,onKeyDown:function onKeyDown(e){return _onKeyDown(e,setHasExceedMaxLenghtPharmacy)},description:description(watchAll.pharmacy,errors.pharmacy,100,hasExceedMaxLenghtPharmacy),validity:errors.pharmacy&&"invalid"},textRegister("pharmacy",{validate:function validate(value){return!(validateFields.n.test(value)||null!=value&&value.includes("&&")||null!=value&&value.includes("||"))||t("views.MedicationManagement.unexpectedCharacters")}})),{},{maxLength:100,isReadOnly:!enable,"aria-readonly":!enable})),(0,jsx_runtime.jsx)(index_esm.Qr,{name:"pharmacyPhone",control:control,rules:{validate:function validate(value){return validPhone(value)}},render:function render(_ref5){var field=_ref5.field;return(0,jsx_runtime.jsx)(uikit.gs,{className:VerifyMedicationFields_module.input,id:"pharmacyPhone",label:t("views.MedicationManagement.VerifyYourMedication.pharmacyPhoneLabel"),validity:errors.pharmacyPhone&&"invalid",description:(0,jsx_runtime.jsx)(Form.p,{value:errors.pharmacyPhone}),input:function input(inputProps){return(0,jsx_runtime.jsx)(uikit.AJ,(0,objectSpread2.Z)((0,objectSpread2.Z)({},inputProps),{},{id:"pharmacyPhone",validity:errors.quantity&&"invalid",value:field.value,onChange:field.onChange,isReadOnly:!enable,"aria-readonly":!enable}))}})}})]})]}),(0,jsx_runtime.jsx)(uikit.zx,{variant:"primary",size:"small",type:"submit",className:VerifyMedicationFields_module.button,hidden:!0,"aria-hidden":!0,tabIndex:-1,children:t("views.VerifyMedications.doneButton")})]})]})};try{VerifyMedicationFields.displayName="VerifyMedicationFields",VerifyMedicationFields.__docgenInfo={description:"",displayName:"VerifyMedicationFields",props:{placeHolder:{defaultValue:null,description:"placeholder for the fields",name:"placeHolder",required:!1,type:{name:"string"}},medication:{defaultValue:null,description:"Medication Data",name:"medication",required:!1,type:{name:"Medications | null"}},enable:{defaultValue:null,description:"enables the fields",name:"enable",required:!0,type:{name:"boolean"}},handleSave:{defaultValue:null,description:"function to save the fields",name:"handleSave",required:!0,type:{name:"(data: FormValues) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/views/ManageMedication/components/VerifyMedicationFields/VerifyMedicationFields.tsx#VerifyMedicationFields"]={docgenInfo:VerifyMedicationFields.__docgenInfo,name:"VerifyMedicationFields",path:"src/views/ManageMedication/components/VerifyMedicationFields/VerifyMedicationFields.tsx#VerifyMedicationFields"})}catch(__react_docgen_typescript_loader_error){}}}]);