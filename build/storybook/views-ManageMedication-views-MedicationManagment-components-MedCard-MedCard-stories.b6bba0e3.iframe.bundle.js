"use strict";(self.webpackChunkh3_consumer_web=self.webpackChunkh3_consumer_web||[]).push([[755],{"./src/views/ManageMedication/views/MedicationManagment/components/MedCard/MedCard.stories.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Active:function(){return Active},Default:function(){return Default},Inactive:function(){return Inactive},default:function(){return MedCard_stories}});var objectSpread2=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),slicedToArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),objectWithoutProperties=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),react=__webpack_require__("./node_modules/react/index.js"),useTranslation=__webpack_require__("./node_modules/react-i18next/dist/es/useTranslation.js"),uikit=__webpack_require__("./src/uikit/index.ts"),useMutation=__webpack_require__("./node_modules/@apollo/client/react/hooks/useMutation.js"),types=__webpack_require__("./src/types/index.ts"),useUserLanguage=__webpack_require__("./src/hooks/useUserLanguage.ts"),EditMedicationDropdown=__webpack_require__("./src/views/ManageMedication/components/EditMedicationDropdown/index.ts"),isOther=__webpack_require__("./src/views/ManageMedication/utils/isOther.ts"),components=__webpack_require__("./src/components/index.ts"),MedicationIcon=__webpack_require__("./src/views/ManageMedication/components/MedicationIcon/index.ts"),react_router=__webpack_require__("./node_modules/react-router/index.js"),routes=__webpack_require__("./src/constants/routes.ts"),MedInfo_module={description:"MedInfo_description__cHspZ",icon:"MedInfo_icon__gfEiL",title:"MedInfo_title__-L8ZE","non-active":"MedInfo_non-active__WazoO",info:"MedInfo_info__DUEvK","info-line":"MedInfo_info-line__im0tZ",response:"MedInfo_response__ITHDl","view-details":"MedInfo_view-details__kSW53"},jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),_excluded=["data","state"],MedInfo=function MedInfo(_ref){var data=_ref.data,state=_ref.state,headingProps=(0,objectWithoutProperties.Z)(_ref,_excluded),location=(0,react_router.TH)(),t=(0,useTranslation.$)().t,viewDetailsRef=(0,react.useRef)(null);return(0,react.useEffect)((function(){var _location$state,_viewDetailsRef$curre,_viewDetailsRef$curre2,_viewDetailsRef$curre3;(null==location||null===(_location$state=location.state)||void 0===_location$state?void 0:_location$state.prevMedicationId)===(null==data?void 0:data.id)&&(null==viewDetailsRef||null===(_viewDetailsRef$curre=viewDetailsRef.current)||void 0===_viewDetailsRef$curre||null===(_viewDetailsRef$curre2=_viewDetailsRef$curre.firstChild)||void 0===_viewDetailsRef$curre2||null===(_viewDetailsRef$curre3=_viewDetailsRef$curre2.focus)||void 0===_viewDetailsRef$curre3||_viewDetailsRef$curre3.call(_viewDetailsRef$curre2))}),[location,data]),(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)("div",{className:MedInfo_module.description,children:[(0,jsx_runtime.jsx)("div",{className:MedInfo_module.icon,"data-testid":"med-icon",children:(0,jsx_runtime.jsx)(MedicationIcon.EA,{isActive:!("NON_ACTIVE"===state),medicationGroup:null==data?void 0:data.medicationGroup})}),(0,jsx_runtime.jsx)("div",{"data-element":"title",className:"\n            ".concat(MedInfo_module.title,"\n            ").concat("NON_ACTIVE"===state?MedInfo_module["non-active"]:"","\n        "),children:(0,jsx_runtime.jsx)(components.X6,(0,objectSpread2.Z)((0,objectSpread2.Z)({},headingProps),{},{children:"".concat(t("medications.name.".concat(null==data?void 0:data.name.split(" ").join(""))).includes(".")?null==data?void 0:data.name:t("medications.name.".concat(null==data?void 0:data.name.split(" ").join("")))," \n                ").concat(t("medications.description.".concat(null==data?void 0:data.description.split(" ").join(""))).includes(".")?null==data?void 0:data.description:t("medications.description.".concat(null==data?void 0:data.description.split(" ").join(""))))}))})]}),function showsInformation(){return!!(null!=data&&data.intakeReasonValue&&null!=data&&data.intakeTimeValue&&null!=data&&data.quantityValue||"NON_ACTIVE"===state)}()&&(0,jsx_runtime.jsxs)("div",{className:MedInfo_module.info,"data-testid":"info-lines","data-element":"fills",children:[(0,jsx_runtime.jsxs)("dl",{className:MedInfo_module["info-line"],children:[(0,jsx_runtime.jsxs)("dt",{className:MedInfo_module.title,children:[t("medicationCard.LastFill"),(0,jsx_runtime.jsx)("span",{children:":"})]}),(0,jsx_runtime.jsx)("dd",{className:MedInfo_module.response,children:null!=data&&data.lastRefillDate?function refactorDate(){var _split=(null==data?void 0:data.lastRefillDate).split("-"),_split2=(0,slicedToArray.Z)(_split,3),year=_split2[0],month=_split2[1],day=_split2[2];return"".concat(month,"/").concat(day,"/").concat(year)}():t("medicationCard.NotFilledYet")})]}),(0,jsx_runtime.jsxs)("dl",{className:MedInfo_module["info-line"],children:[(0,jsx_runtime.jsxs)("dt",{className:MedInfo_module.title,children:[t("medicationCard.Schedule"),(0,jsx_runtime.jsx)("span",{children:":"})]}),(0,jsx_runtime.jsx)("dd",{className:MedInfo_module.response,children:null!=data&&data.intakeTimeValue?function showIntakeTimeValue(){return t("EditMedicationDropdown.timesDay.".concat(null==data?void 0:data.intakeTimeValue)).includes(".")?null==data?void 0:data.intakeTimeValue:t("EditMedicationDropdown.timesDay.".concat(null==data?void 0:data.intakeTimeValue))}():t("medicationCard.NotFilledYet")})]})]}),(0,jsx_runtime.jsx)("div",{className:MedInfo_module["view-details"],ref:viewDetailsRef,"data-element":"link",children:(0,jsx_runtime.jsxs)(uikit.zx,{className:MedInfo_module.button,variant:"text",to:"".concat(routes._.medicationManagement.view,"/").concat(null==data?void 0:data.id),"aria-label":"".concat(t("medicationCard.infoButton.ViewDetailsAbout")," ").concat(null==data?void 0:data.name," ").concat(null==data?void 0:data.description),state:{prevRoute:location.pathname},children:[t("medicationCard.infoButton.ViewDetails"),(0,jsx_runtime.jsx)(components.JO,{type:"chevron-right-circle"})]})})]})};try{MedInfo.displayName="MedInfo",MedInfo.__docgenInfo={description:"",displayName:"MedInfo",props:{data:{defaultValue:null,description:"",name:"data",required:!1,type:{name:"Medications"}},state:{defaultValue:null,description:"",name:"state",required:!1,type:{name:"string"}},headingLevel:{defaultValue:null,description:"",name:"headingLevel",required:!1,type:{name:"enum",value:[{value:'"h1"'},{value:'"h2"'},{value:'"h3"'},{value:'"h4"'},{value:'"h5"'},{value:'"h6"'}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/views/ManageMedication/views/MedicationManagment/components/MedCard/MedInfo/MedInfo.tsx#MedInfo"]={docgenInfo:MedInfo.__docgenInfo,name:"MedInfo",path:"src/views/ManageMedication/views/MedicationManagment/components/MedCard/MedInfo/MedInfo.tsx#MedInfo"})}catch(__react_docgen_typescript_loader_error){}var MedCard_module={wrapper:"MedCard_wrapper__HulLX","questions-container":"MedCard_questions-container__CYAsL",card:"MedCard_card__aoLmP",information:"MedCard_information__cdn5r","segmented-question":"MedCard_segmented-question__lNIvD",question:"MedCard_question__jDCfo",segmented:"MedCard_segmented__C8n+j","active-inactive-state":"MedCard_active-inactive-state__kB7ht"},MedCard_excluded=["data","setHasModifiedAMed"],MedCard=function MedCard(_ref){var data=_ref.data,headingProps=(_ref.setHasModifiedAMed,(0,objectWithoutProperties.Z)(_ref,MedCard_excluded)),_useState=(0,react.useState)(!1),_useState2=(0,slicedToArray.Z)(_useState,2),showQuestions=_useState2[0],setShowQuestions=_useState2[1],language=(0,useUserLanguage.f)(),t=(0,useTranslation.$)().t,_useMutation=(0,useMutation.D)(types.TE5,{refetchQueries:["ongoingMedications"]}),_useMutation2=(0,slicedToArray.Z)(_useMutation,2),updateOngoingMedication=_useMutation2[0],loading=_useMutation2[1].loading,_useState3=(0,react.useState)(function setState(){return(null==data?void 0:data.intakeReasonValue)&&data.intakeTimeValue&&data.quantityValue||(null==data?void 0:data.status)===types.bIP.NonActive}()?null==data?void 0:data.status:"none"),_useState4=(0,slicedToArray.Z)(_useState3,2),segmentedState=_useState4[0],setSegmentedState=_useState4[1],showsInformation=function showsInformation(){return!(null!=data&&data.intakeReasonValue&&data.intakeTimeValue&&data.quantityValue||segmentedState===types.bIP.NonActive)},_useCatalogueMedicine=(0,types.nbX)({variables:{productId:(null==data?void 0:data.productId)||"",lang:language}}),dataIntake=_useCatalogueMedicine.data,loadingIntake=_useCatalogueMedicine.loading;return(0,jsx_runtime.jsxs)("div",{className:MedCard_module.wrapper,children:[(0,jsx_runtime.jsxs)("div",{className:MedCard_module.card,"data-element":"shows-information-".concat(showsInformation()),children:[(0,jsx_runtime.jsx)("div",{className:"\n            ".concat(MedCard_module.information,"\n            ").concat(showsInformation()?"":MedCard_module["active-inactive-state"],"\n        "),"data-element":"medinfo",children:(0,jsx_runtime.jsx)(MedInfo,(0,objectSpread2.Z)({data:data,state:segmentedState},headingProps))}),showsInformation()&&(0,jsx_runtime.jsxs)("div",{className:MedCard_module["segmented-question"],"data-testid":"segmented-question","data-element":"segmented",children:[(0,jsx_runtime.jsx)("div",{className:MedCard_module.question,children:t("medicationCard.question.Areyoutakingthismedication?")}),(0,jsx_runtime.jsx)("div",{className:MedCard_module.segmented,"data-testid":"segmented",children:(0,jsx_runtime.jsxs)(uikit.Cb,{onChange:function onChange(event){return event.target.value===types.bIP.NonActive?(setShowQuestions(!1),setSegmentedState(event.target.value),updateOngoingMedication({variables:{productId:null==data?void 0:data.productId,creationType:null==data?void 0:data.creationType,status:types.bIP.NonActive,quantity:null==data?void 0:data.quantity,id:null==data?void 0:data.id,pharmacy:null==data?void 0:data.pharmacy,pharmacyPhoneNumber:null==data?void 0:data.pharmacyPhoneNumber,prescribedBy:null==data?void 0:data.prescribedBy,prescriberPhoneNumber:null==data?void 0:data.prescriberPhoneNumber,lastRefillDate:null==data?void 0:data.lastRefillDate,quantityValue:null==data?void 0:data.quantityValue,intakeTimeValue:null==data?void 0:data.intakeTimeValue,intakeReasonValue:null==data?void 0:data.intakeReasonValue}})):(setSegmentedState(event.target.value),setShowQuestions(!0))},name:"segmented-".concat(null==data?void 0:data.id),value:showQuestions?types.bIP.Active:segmentedState||"","aria-label":t("medicationCard.question.Areyoutakingthismedication?"),children:[(0,jsx_runtime.jsx)(uikit.uA,{value:types.bIP.Active,children:t("medicationCard.question.Yes")}),(0,jsx_runtime.jsx)(uikit.uA,{value:types.bIP.NonActive,children:t("medicationCard.question.No")})]})})]})]}),showQuestions&&(0,jsx_runtime.jsx)("div",{className:MedCard_module["questions-container"],children:loadingIntake?(0,jsx_runtime.jsx)(uikit.$j,{className:MedCard_module["profile-loader"]}):(0,jsx_runtime.jsx)(EditMedicationDropdown.L,{handleDone:function onSubmitQuestions(formData){updateOngoingMedication({variables:{productId:null==data?void 0:data.productId,creationType:null==data?void 0:data.creationType,status:segmentedState,quantity:null==data?void 0:data.quantity,id:null==data?void 0:data.id,quantityValue:(0,isOther.p)(null==formData?void 0:formData.amount.value)?formData.typeAmount:formData.amount.value,intakeTimeValue:(0,isOther.p)(formData.timesInADay.value)?formData.typeTimesInADay:formData.timesInADay.value,intakeReasonValue:(0,isOther.p)(formData.reason.value)?formData.typeReason:formData.reason.value,pharmacy:null==data?void 0:data.pharmacy,pharmacyPhoneNumber:null==data?void 0:data.pharmacyPhoneNumber,prescribedBy:null==data?void 0:data.prescribedBy,prescriberPhoneNumber:null==data?void 0:data.prescriberPhoneNumber,lastRefillDate:null==data?void 0:data.lastRefillDate}})},isLoading:loading,intakeData:null==dataIntake?void 0:dataIntake.catalogueMedicine})})]})};try{MedCard.displayName="MedCard",MedCard.__docgenInfo={description:"",displayName:"MedCard",props:{data:{defaultValue:null,description:"",name:"data",required:!1,type:{name:"Medications"}},setHasModifiedAMed:{defaultValue:null,description:"",name:"setHasModifiedAMed",required:!1,type:{name:"Dispatch<SetStateAction<boolean | boolean[]>>"}},headingLevel:{defaultValue:null,description:"",name:"headingLevel",required:!1,type:{name:"enum",value:[{value:'"h1"'},{value:'"h2"'},{value:'"h3"'},{value:'"h4"'},{value:'"h5"'},{value:'"h6"'}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/views/ManageMedication/views/MedicationManagment/components/MedCard/MedCard.tsx#MedCard"]={docgenInfo:MedCard.__docgenInfo,name:"MedCard",path:"src/views/ManageMedication/views/MedicationManagment/components/MedCard/MedCard.tsx#MedCard"})}catch(__react_docgen_typescript_loader_error){}var MedCard_stories={title:"Consumer Web/MedCard",component:MedCard},Template=function Template(args){return(0,jsx_runtime.jsx)(MedCard,(0,objectSpread2.Z)({},args))},Default=Template.bind({}),Active=Template.bind({}),Inactive=Template.bind({});Default.args={data:{name:"Aspirine",description:"10 MG",creationType:"MANUALLY",status:"ACTIVE",prescribedBy:"Dr. Alex",lastRefillDate:"2020-05-20",medicationGroup:"Capsule"},headingLevel:"h3"},Active.args={data:{name:"Aspirine",description:"10 MG",intakeReasonValue:"Because yes",intakeTimeValue:"Each hour",quantityValue:"10",creationType:"MANUALLY",status:"ACTIVE",prescribedBy:"Dr. Alex",lastRefillDate:"2020-05-20",medicationGroup:"Capsule"},headingLevel:"h3"},Inactive.args={data:{name:"Aspirine",description:"10 MG",intakeReasonValue:"Because yes",intakeTimeValue:"Each hour",quantityValue:"10",creationType:"MANUALLY",status:"NON_ACTIVE",prescribedBy:"Dr. Alex",lastRefillDate:"2020-05-20",medicationGroup:"Capsule"},headingLevel:"h3"},Default.parameters=(0,objectSpread2.Z)({storySource:{source:"(args) => (\n  <MedCard {...args} />\n)"}},Default.parameters),Active.parameters=(0,objectSpread2.Z)({storySource:{source:"(args) => (\n  <MedCard {...args} />\n)"}},Active.parameters),Inactive.parameters=(0,objectSpread2.Z)({storySource:{source:"(args) => (\n  <MedCard {...args} />\n)"}},Inactive.parameters)},"./src/views/ManageMedication/components/EditMedicationDropdown/index.ts":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{L:function(){return _EditMedicationDropdown__WEBPACK_IMPORTED_MODULE_0__.L}});var _EditMedicationDropdown__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/views/ManageMedication/components/EditMedicationDropdown/EditMedicationDropdown.tsx")},"./src/views/ManageMedication/components/MedicationIcon/index.ts":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{EA:function(){return _MedicationIcon__WEBPACK_IMPORTED_MODULE_0__.EA}});var _MedicationIcon__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/views/ManageMedication/components/MedicationIcon/MedicationIcon.tsx")}}]);